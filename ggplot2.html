<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Introduction to ggplot2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Visualization in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Welcome</a>
</li>
<li>
  <a href="pre_work.html">Pre-Work</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Intro to R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro/presentation.html">Slides</a>
    </li>
    <li>
      <a href="r_intro.html">Code</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    ggplot2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data_viz_Felipe.html">Slides</a>
    </li>
    <li>
      <a href="ggplot2.html">Code</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Networks
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="NetworkVizR.html">Slides</a>
    </li>
    <li>
      <a href="Networks.html">Code</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Maps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mapping/slideshow/mapping_presentation.html">Slides</a>
    </li>
    <li>
      <a href="mapping.html">Code</a>
    </li>
  </ul>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Introduction to ggplot2</h1>

</div>


<div id="this-part-of-the-workshop-was-organized-by-felipe-dalla-lana" class="section level4">
<h4>This part of the workshop was organized by Felipe Dalla Lana</h4>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<p>These are the packages that will be used in this module. These packages should have been installed prior to the workshop.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">library</span>(ggsci)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(ggthemes)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(ggpubr)</a></code></pre></div>
</div>
<div id="plotting" class="section level2">
<h2>Plotting</h2>
<p>Here is the plot that we will eventually build today. We will show you the code first, and the finished product, but will walk through how to build this graph step-by-step.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data_long, <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> rate))<span class="op">+</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="st">  </span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">color =</span> farm_management),</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">              <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="st">  </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="st">  </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="st">  </span><span class="kw">scale_color_npg</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="st">  </span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Disease distribution across farm management&quot;</span>, </a>
<a class="sourceLine" id="cb2-11" data-line-number="11">       <span class="dt">x =</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">       <span class="dt">y =</span> <span class="st">&quot;Percent (%)&quot;</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">       <span class="dt">color =</span> <span class="st">&quot;Farm management&quot;</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="st">  </span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">    <span class="dt">panel.background =</span> <span class="kw">element_blank</span>() ,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">    <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey88&quot;</span>) ,</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">    <span class="dt">panel.border     =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;grey80&quot;</span>, <span class="dt">fill =</span> <span class="ot">NA</span>) ,</a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    </a>
<a class="sourceLine" id="cb2-20" data-line-number="20">    <span class="dt">axis.text.y  =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">    <span class="dt">axis.text.x  =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb2-22" data-line-number="22">    <span class="dt">title =</span> <span class="kw">element_text</span>(<span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="dt">size =</span> <span class="dv">13</span>),</a>
<a class="sourceLine" id="cb2-23" data-line-number="23">    </a>
<a class="sourceLine" id="cb2-24" data-line-number="24">    <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.70</span>, <span class="fl">.37</span>),</a>
<a class="sourceLine" id="cb2-25" data-line-number="25">    <span class="dt">legend.key =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>),</a>
<a class="sourceLine" id="cb2-26" data-line-number="26">    <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size=</span><span class="dv">12</span>),</a>
<a class="sourceLine" id="cb2-27" data-line-number="27"></a>
<a class="sourceLine" id="cb2-28" data-line-number="28">    <span class="dt">strip.text.x =</span>  <span class="kw">element_text</span>(<span class="dt">hjust =</span><span class="fl">0.01</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="dt">size =</span> <span class="dv">14</span>),</a>
<a class="sourceLine" id="cb2-29" data-line-number="29">    <span class="dt">strip.background =</span>  <span class="kw">element_blank</span>())</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-3-1.png" width="576" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw">ggsave</span>(<span class="st">&quot;graph/target.tiff&quot;</span>,  </a>
<a class="sourceLine" id="cb3-2" data-line-number="2">       <span class="dt">width =</span><span class="dv">140</span>, <span class="dt">height =</span> <span class="dv">200</span>, <span class="dt">units =</span> <span class="st">&quot;mm&quot;</span>, <span class="dt">dpi =</span> <span class="dv">300</span>)</a></code></pre></div>
</div>
<div id="ggplot2-basics" class="section level2">
<h2>ggplot2 basics</h2>
<p><br />
</p>
<div id="data-organization" class="section level3">
<h3>Data organization</h3>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">survey_data &lt;-<span class="st"> </span><span class="kw">read_csv</span>(here<span class="op">::</span><span class="kw">here</span>(<span class="st">&quot;data&quot;</span>, <span class="st">&quot;survey_clean.csv&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(farm, region, zone, district, lon, lat)) <span class="co">### read in data that was described in the previous module, and select the columns that we would like to use</span></a></code></pre></div>
<pre><code>## 
## ── Column specification ────────────────────────────────────────────────────────
## cols(
##   farm = col_double(),
##   region = col_character(),
##   zone = col_character(),
##   district = col_character(),
##   lon = col_double(),
##   lat = col_double(),
##   altitude = col_double(),
##   cultivar = col_character(),
##   shade = col_character(),
##   cropping_system = col_character(),
##   farm_management = col_character(),
##   inc = col_double(),
##   sev2 = col_double()
## )</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">head</span>(survey_data) <span class="co">## check the top lines of data </span></a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   altitude cultivar shade     cropping_system farm_management   inc  sev2
##      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;           &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1     1100 Local    Sun       Plantation      Unmanaged        86.7 55.6 
## 2     1342 Mixture  Mid shade Plantation      Minimal          51.3 17.9 
## 3     1434 Mixture  Mid shade Plantation      Minimal          43.2  8.25
## 4     1100 Local    Sun       Plantation      Unmanaged        76.7 46.1 
## 5     1400 Local    Sun       Plantation      Unmanaged        47.2 12.3 
## 6     1342 Mixture  Mid shade Plantation      Minimal          51.3 19.9</code></pre>
<p>Let’s get started with ggplot. What happens if we only run ggplot() without any additional information?</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw">ggplot</span>() </a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>Not much! We need to be sure to specify the data (survey_data) and aesthetic elements (y and x axes).</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data, <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">class</span>(survey_data<span class="op">$</span>farm_management)</a></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">levels</span>(survey_data<span class="op">$</span>farm_management)</a></code></pre></div>
<pre><code>## NULL</code></pre>
<p>BUT- we still didn’t say anything about what type of plot we want.</p>
<p>Below we make sure that our data is in the correct form. For the graphs we would like to make, the farm management stratifies need to be set as factors.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">survey_data =<span class="st"> </span>survey_data  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">farm_management =</span> <span class="kw">factor</span>(farm_management, </a>
<a class="sourceLine" id="cb14-3" data-line-number="3">              <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;Unmanaged&quot;</span>, <span class="st">&quot;Minimal&quot;</span>, <span class="st">&quot;Moderate&quot;</span>, <span class="st">&quot;Intensive&quot;</span>))) </a>
<a class="sourceLine" id="cb14-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb14-5" data-line-number="5"><span class="kw">head</span>(survey_data)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   altitude cultivar shade     cropping_system farm_management   inc  sev2
##      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;           &lt;fct&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1     1100 Local    Sun       Plantation      Unmanaged        86.7 55.6 
## 2     1342 Mixture  Mid shade Plantation      Minimal          51.3 17.9 
## 3     1434 Mixture  Mid shade Plantation      Minimal          43.2  8.25
## 4     1100 Local    Sun       Plantation      Unmanaged        76.7 46.1 
## 5     1400 Local    Sun       Plantation      Unmanaged        47.2 12.3 
## 6     1342 Mixture  Mid shade Plantation      Minimal          51.3 19.9</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">class</span>(survey_data<span class="op">$</span>farm_management)</a></code></pre></div>
<pre><code>## [1] &quot;factor&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">levels</span>(survey_data<span class="op">$</span>farm_management)</a></code></pre></div>
<pre><code>## [1] &quot;Unmanaged&quot; &quot;Minimal&quot;   &quot;Moderate&quot;  &quot;Intensive&quot;</code></pre>
<p>Now we can start adding the “meat and potatoes” to the graph.</p>
<p>Here, we add the simple box plot geometry:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb21-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<p>Alternatively, we can use the geom_point() geometry:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>Well, it’s hard to see the individual points in the plot above, so lets “jitter” them from side to side with the jitter geometry:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb23-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>) <span class="co"># make the width a bit smaller </span></a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<p>It would be even better if we could see both the data points AND the summary information that is available in a boxplot. Here we layer two geometries: geom_jitter and geom_boxplot.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p>See what happens when you reverse the order of those geometries:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>Some other useful geometries include geom_violin, geom_histogram, and geom_density. These each give information about the distribution of our data:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb27-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_violin</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_histogram</span>()</a></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_density</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-13-3.png" width="672" /></p>
<p>Here we look at geom_dotplot and geom_point(). Adding geom_smooth() and geom_rug() to geom_point() allow you to present additional information about the smoothed mean and distribution of data points.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,<span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb31-2" data-line-number="2"><span class="kw">geom_dotplot</span>(<span class="dt">binaxis =</span> <span class="st">&quot;y&quot;</span>, </a>
<a class="sourceLine" id="cb31-3" data-line-number="3">             <span class="dt">stackdir =</span> <span class="st">&quot;center&quot;</span>, <span class="dt">binwidth =</span> <span class="fl">1.2</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data, <span class="kw">aes</span>(<span class="dt">x =</span> inc, <span class="dt">y =</span> sev2))<span class="op">+</span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data, <span class="kw">aes</span>(<span class="dt">x =</span> inc, <span class="dt">y =</span> sev2))<span class="op">+</span></a>
<a class="sourceLine" id="cb33-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>()<span class="op">+</span><span class="st"> </span><span class="kw">geom_smooth</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_rug</span>()</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-14-3.png" width="672" /></p>
</div>
</div>
<div id="aesthetics" class="section level1">
<h1>Aesthetics</h1>
<p>Choosing aesthetics is critical for communicating the message of a plot. Colors, for example can be used strategically to convey information. Here we color by farm management type:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc, </a>
<a class="sourceLine" id="cb35-2" data-line-number="2">                      <span class="dt">shape =</span> farm_management, </a>
<a class="sourceLine" id="cb35-3" data-line-number="3">                      <span class="dt">color =</span> farm_management))<span class="op">+</span></a>
<a class="sourceLine" id="cb35-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb35-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb36-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">color =</span> farm_management),<span class="dt">width =</span> <span class="fl">0.2</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<p>We can change the size of points as well as the transparency.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb37-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">color =</span> farm_management),<span class="dt">width =</span> <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb37-4" data-line-number="4">              <span class="dt">size =</span> <span class="dv">3</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb38-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> farm_management),<span class="dt">width =</span> <span class="fl">0.2</span>,</a>
<a class="sourceLine" id="cb38-4" data-line-number="4">              <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-16-2.png" width="672" /></p>
<p>‘fill’ will apply color to the variable you indicate:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management))<span class="op">+</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="kw">aes</span>(<span class="dt">fill =</span> cultivar)) </a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb40-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="dv">4</span>, <span class="dt">shape =</span> <span class="dv">21</span>,</a>
<a class="sourceLine" id="cb40-3" data-line-number="3">              <span class="kw">aes</span>(<span class="dt">fill =</span> altitude ))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
<p>Size of points as well as transparency can be changed by setting ‘size’ or ‘alpha’ equal to the continuous variable that you would like to use.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb41-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="dv">4</span>,</a>
<a class="sourceLine" id="cb41-3" data-line-number="3">              <span class="kw">aes</span>(<span class="dt">alpha =</span> sev2 ))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">shape =</span> <span class="dv">21</span>, <span class="dt">fill =</span> <span class="st">&quot;grey&quot;</span>,</a>
<a class="sourceLine" id="cb42-3" data-line-number="3">              <span class="kw">aes</span>(<span class="dt">size =</span> sev2 ))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-18-2.png" width="672" /></p>
<p>Change the shapes of each level (a good option if a figure will be black and white).</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb43-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb43-3" data-line-number="3">    <span class="kw">aes</span>(<span class="dt">shape =</span> farm_management))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>You can also adjust the border color of points:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>, <span class="dt">shape =</span> <span class="dv">21</span>,</a>
<a class="sourceLine" id="cb44-3" data-line-number="3">              <span class="kw">aes</span>(<span class="dt">color =</span> farm_management))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb45-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">alpha =</span> <span class="fl">0.8</span>, <span class="dt">shape =</span> <span class="dv">21</span>,</a>
<a class="sourceLine" id="cb45-3" data-line-number="3">              <span class="kw">aes</span>(<span class="dt">fill =</span> farm_management))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-20-2.png" width="672" /></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data, <span class="kw">aes</span>(<span class="dt">x=</span>inc , <span class="dt">y =</span> sev2))<span class="op">+</span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">linetype =</span> cultivar), <span class="dt">se =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data, <span class="kw">aes</span>(<span class="dt">x=</span>inc , <span class="dt">y =</span> sev2, <span class="dt">color =</span> cultivar))<span class="op">+</span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb48-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="kw">aes</span>(<span class="dt">linetype =</span> cultivar), <span class="dt">se =</span> <span class="ot">FALSE</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb48-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_rug</span>()</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-21-2.png" width="672" /></p>
</div>
<div id="scales" class="section level1">
<h1>Scales</h1>
<p>You can manually adjust the x and y axis scales. This can be very useful when creating publication ready plots.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">p =<span class="st"> </span><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> farm_management), </a>
<a class="sourceLine" id="cb50-4" data-line-number="4">              <span class="dt">width =</span> <span class="fl">0.2</span>,<span class="dt">size =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb50-5" data-line-number="5"></a>
<a class="sourceLine" id="cb50-6" data-line-number="6">p <span class="op">+</span><span class="st"> </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Incidence (%)&quot;</span>,</a>
<a class="sourceLine" id="cb50-7" data-line-number="7">                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>),</a>
<a class="sourceLine" id="cb50-8" data-line-number="8">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p>You can also manually change the colors of factor levels.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb51-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_manual</span>(</a>
<a class="sourceLine" id="cb51-2" data-line-number="2">        <span class="dt">name =</span> <span class="st">&quot;Farm management&quot;</span>,</a>
<a class="sourceLine" id="cb51-3" data-line-number="3">        <span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;grey80&quot;</span>, <span class="st">&quot;#2ca25f&quot;</span>, <span class="st">&quot;#756bb120&quot;</span>))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>There are pre-defined color palettes in scale_color_brewer:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span><span class="kw">scale_color_brewer</span>(<span class="dt">name =</span> <span class="st">&quot;Farm management&quot;</span>,</a>
<a class="sourceLine" id="cb52-2" data-line-number="2">          <span class="dt">palette =</span> <span class="st">&quot;PRGn&quot;</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p><strong>ggsci</strong> is a package that offers a collection of color palettes inspired by colors used in scientific journals, data visualization libraries, science fiction movies, and TV shows.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb53-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span>ggsci<span class="op">::</span><span class="kw">scale_color_npg</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">p <span class="op">+</span><span class="st"> </span>ggsci<span class="op">::</span><span class="kw">scale_color_aaas</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-25-2.png" width="672" /></p>
<p>Lines can also be changed in ggplot, here is an example where we manually changed the type of line for each level. This graph shows incidence vs. severity.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb55-1" data-line-number="1"><span class="kw">ggplot</span>(survey_data, <span class="kw">aes</span>(<span class="dt">x=</span>inc , <span class="dt">y =</span> sev2))<span class="op">+</span></a>
<a class="sourceLine" id="cb55-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>, <span class="kw">aes</span>(<span class="dt">linetype =</span> cultivar, <span class="dt">color =</span> cultivar))<span class="op">+</span></a>
<a class="sourceLine" id="cb55-3" data-line-number="3"><span class="st">  </span><span class="co"># scale_linetype_manual(values = c(1,2,4)) + </span></a>
<a class="sourceLine" id="cb55-4" data-line-number="4"><span class="st">  </span><span class="kw">scale_linetype_manual</span>(<span class="dt">values =</span> <span class="kw">c</span>(<span class="st">&quot;solid&quot;</span>,<span class="st">&quot;longdash&quot;</span>, <span class="st">&quot;991191&quot;</span>))</a></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
</div>
<div id="facets" class="section level1">
<h1>Facets</h1>
<p>Faceting is an easy way to break data into multipe plots with the same themes.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb57-1" data-line-number="1"><span class="kw">head</span>(survey_data)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   altitude cultivar shade     cropping_system farm_management   inc  sev2
##      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;           &lt;fct&gt;           &lt;dbl&gt; &lt;dbl&gt;
## 1     1100 Local    Sun       Plantation      Unmanaged        86.7 55.6 
## 2     1342 Mixture  Mid shade Plantation      Minimal          51.3 17.9 
## 3     1434 Mixture  Mid shade Plantation      Minimal          43.2  8.25
## 4     1100 Local    Sun       Plantation      Unmanaged        76.7 46.1 
## 5     1400 Local    Sun       Plantation      Unmanaged        47.2 12.3 
## 6     1342 Mixture  Mid shade Plantation      Minimal          51.3 19.9</code></pre>
<p>Here we need to make sure our data is correctly organized. This will help us visualize incicence and severity side-by-side. We also rename inc to “Incidence” and sev2 to “Severity” because these will be the labels of our facet plots.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb59-1" data-line-number="1">survey_data_long =<span class="st"> </span>survey_data  <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-2" data-line-number="2"><span class="st">   </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> <span class="kw">c</span>(inc, sev2), </a>
<a class="sourceLine" id="cb59-3" data-line-number="3">               <span class="dt">names_to =</span> <span class="st">&quot;metric&quot;</span>, </a>
<a class="sourceLine" id="cb59-4" data-line-number="4">               <span class="dt">values_to =</span> <span class="st">&quot;rate&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb59-5" data-line-number="5"><span class="st">   </span></a>
<a class="sourceLine" id="cb59-6" data-line-number="6"><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">metric =</span> <span class="kw">factor</span>(metric, </a>
<a class="sourceLine" id="cb59-7" data-line-number="7">                         <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;inc&quot;</span>, <span class="st">&quot;sev2&quot;</span>), </a>
<a class="sourceLine" id="cb59-8" data-line-number="8">                         <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;Incidence&quot;</span>, <span class="st">&quot;Severity&quot;</span>)))</a>
<a class="sourceLine" id="cb59-9" data-line-number="9"></a>
<a class="sourceLine" id="cb59-10" data-line-number="10"><span class="kw">head</span>(survey_data_long)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 7
##   altitude cultivar shade     cropping_system farm_management metric     rate
##      &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;           &lt;fct&gt;           &lt;fct&gt;     &lt;dbl&gt;
## 1     1100 Local    Sun       Plantation      Unmanaged       Incidence 86.7 
## 2     1100 Local    Sun       Plantation      Unmanaged       Severity  55.6 
## 3     1342 Mixture  Mid shade Plantation      Minimal         Incidence 51.3 
## 4     1342 Mixture  Mid shade Plantation      Minimal         Severity  17.9 
## 5     1434 Mixture  Mid shade Plantation      Minimal         Incidence 43.2 
## 6     1434 Mixture  Mid shade Plantation      Minimal         Severity   8.25</code></pre>
<p>Save plot as ‘p2’ and plot ‘p2’.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1">p2 =<span class="st"> </span><span class="kw">ggplot</span>(survey_data_long, <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> rate))<span class="op">+</span></a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="st">  </span></a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">color =</span> farm_management),</a>
<a class="sourceLine" id="cb61-5" data-line-number="5">              <span class="dt">size =</span> <span class="dv">3</span>, <span class="dt">width =</span> <span class="fl">0.2</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb61-6" data-line-number="6"><span class="st">  </span></a>
<a class="sourceLine" id="cb61-7" data-line-number="7"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">25</span>),</a>
<a class="sourceLine" id="cb61-8" data-line-number="8">                     <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="op">+</span></a>
<a class="sourceLine" id="cb61-9" data-line-number="9"><span class="st">  </span><span class="kw">scale_color_npg</span>()</a>
<a class="sourceLine" id="cb61-10" data-line-number="10"></a>
<a class="sourceLine" id="cb61-11" data-line-number="11">p2</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-29-1.png" width="672" /> Here we facet_wrap by metric (incidence and severity are our metrics):</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>If we specify the number of columns (ncol) as 1, the plots will be stacked into a single column.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-31-1.png" width="576" /></p>
<p>facet_grid() allows us to create a grid of plots.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_grid</span>(shade<span class="op">~</span>metric)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-32-1.png" width="960" /></p>
</div>
<div id="labels" class="section level1">
<h1>Labels</h1>
<p>Here we can add custom titles, subtitles, and footnotes.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">  p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="st">  </span></a>
<a class="sourceLine" id="cb65-3" data-line-number="3"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">title =</span> <span class="st">&quot;Plot title&quot;</span>, </a>
<a class="sourceLine" id="cb65-4" data-line-number="4">       <span class="dt">subtitle =</span> <span class="st">&quot;Here is a subtitle&quot;</span>,</a>
<a class="sourceLine" id="cb65-5" data-line-number="5">       <span class="dt">x =</span> <span class="ot">NULL</span>, <span class="co"># suppress x-axis title</span></a>
<a class="sourceLine" id="cb65-6" data-line-number="6">       <span class="dt">y =</span> <span class="st">&quot;y-axis title&quot;</span>,</a>
<a class="sourceLine" id="cb65-7" data-line-number="7">       <span class="dt">color =</span> <span class="st">&quot;Legend title&quot;</span>, </a>
<a class="sourceLine" id="cb65-8" data-line-number="8">       <span class="dt">caption =</span> <span class="st">&quot;Hey!!! This can be a footnote&quot;</span>)</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-33-1.png" width="576" /></p>
</div>
<div id="themes" class="section level1">
<h1>Themes</h1>
<p>Themes are pre-defined themes that are built into ggplot and can be slightly modified.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="st">  </span><span class="kw">theme_bw</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-34-1.png" width="576" /></p>
<p>Here is theme classic:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="st">  </span><span class="kw">theme_classic</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-35-1.png" width="576" /></p>
<p>Here is theme minimal:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">  </span><span class="kw">theme_minimal</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-36-1.png" width="576" /></p>
<p>Here is theme Economist and theme Excel.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">theme_economist</span>() </a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-37-1.png" width="576" /></p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="st">  </span>ggthemes<span class="op">::</span><span class="kw">theme_excel</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-37-2.png" width="576" /></p>
<p>We can individually edit components of a theme. This can be particularly useful for making graphs for publications.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">  p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">&quot;Percent (%)&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;Farm Management&quot;</span>)<span class="op">+</span><span class="st">  </span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="st">  </span></a>
<a class="sourceLine" id="cb71-4" data-line-number="4"><span class="st">  </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb71-5" data-line-number="5">    <span class="dt">panel.background =</span> <span class="kw">element_blank</span>() ,</a>
<a class="sourceLine" id="cb71-6" data-line-number="6">    <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey88&quot;</span>) ,</a>
<a class="sourceLine" id="cb71-7" data-line-number="7">    <span class="dt">panel.border     =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;grey80&quot;</span>, <span class="dt">fill =</span> <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb71-8" data-line-number="8">    </a>
<a class="sourceLine" id="cb71-9" data-line-number="9">    <span class="dt">axis.text.y  =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb71-10" data-line-number="10">    <span class="dt">axis.text.x  =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb71-11" data-line-number="11">    <span class="dt">title =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="dv">12</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb71-12" data-line-number="12"></a>
<a class="sourceLine" id="cb71-13" data-line-number="13">    <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.85</span>, <span class="fl">.39</span>),</a>
<a class="sourceLine" id="cb71-14" data-line-number="14">    <span class="dt">legend.key =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>),</a>
<a class="sourceLine" id="cb71-15" data-line-number="15">    <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="dv">12</span>),</a>
<a class="sourceLine" id="cb71-16" data-line-number="16">    </a>
<a class="sourceLine" id="cb71-17" data-line-number="17">    <span class="dt">strip.text.x =</span>  <span class="kw">element_text</span>(<span class="dt">hjust =</span><span class="fl">0.01</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>, <span class="dt">size =</span> <span class="dv">14</span>),</a>
<a class="sourceLine" id="cb71-18" data-line-number="18">    <span class="dt">strip.background =</span>  <span class="kw">element_blank</span>())</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-38-1.png" width="576" /></p>
</div>
<div id="save" class="section level1">
<h1>Save</h1>
<p>Saving according to the size that you would like can be tricky, we recommend using ggsave.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">  <span class="kw">ggsave</span>(<span class="dt">filename =</span> <span class="st">&quot;graph/APS_plot.tiff&quot;</span>,</a>
<a class="sourceLine" id="cb72-2" data-line-number="2">         <span class="dt">width =</span><span class="dv">85</span>, <span class="dt">height =</span> <span class="dv">140</span>, <span class="dt">units =</span> <span class="st">&quot;mm&quot;</span>,</a>
<a class="sourceLine" id="cb72-3" data-line-number="3">         <span class="dt">dpi =</span> <span class="dv">300</span>)</a></code></pre></div>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1"> p3 =<span class="st">  </span>p2 <span class="op">+</span><span class="st"> </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2"><span class="st">      </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">&quot;Percent (%)&quot;</span>, <span class="dt">color =</span> <span class="st">&quot;Farm Management&quot;</span>)<span class="op">+</span><span class="st">  </span></a>
<a class="sourceLine" id="cb73-3" data-line-number="3"><span class="st">    </span></a>
<a class="sourceLine" id="cb73-4" data-line-number="4"><span class="st">    </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb73-5" data-line-number="5">      <span class="dt">panel.background =</span> <span class="kw">element_blank</span>() ,</a>
<a class="sourceLine" id="cb73-6" data-line-number="6">      <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey88&quot;</span>) ,</a>
<a class="sourceLine" id="cb73-7" data-line-number="7">      <span class="dt">panel.border     =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;grey80&quot;</span>, <span class="dt">fill =</span> <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb73-8" data-line-number="8">      </a>
<a class="sourceLine" id="cb73-9" data-line-number="9">      <span class="dt">axis.text.y  =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb73-10" data-line-number="10">      <span class="dt">axis.text.x  =</span> <span class="kw">element_blank</span>(),</a>
<a class="sourceLine" id="cb73-11" data-line-number="11">      <span class="dt">title =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb73-12" data-line-number="12">      </a>
<a class="sourceLine" id="cb73-13" data-line-number="13">      <span class="dt">legend.position =</span> <span class="kw">c</span>(<span class="fl">0.72</span>, <span class="fl">.33</span>),</a>
<a class="sourceLine" id="cb73-14" data-line-number="14">      <span class="dt">legend.key =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">&quot;white&quot;</span>),</a>
<a class="sourceLine" id="cb73-15" data-line-number="15">      <span class="dt">legend.text =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb73-16" data-line-number="16">      </a>
<a class="sourceLine" id="cb73-17" data-line-number="17">      <span class="dt">strip.text.x =</span>  <span class="kw">element_text</span>(<span class="dt">hjust =</span><span class="fl">0.01</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb73-18" data-line-number="18">      <span class="dt">strip.background =</span>  <span class="kw">element_blank</span>())</a>
<a class="sourceLine" id="cb73-19" data-line-number="19">  </a>
<a class="sourceLine" id="cb73-20" data-line-number="20">   <span class="kw">ggsave</span>(<span class="dt">plot =</span> p3, <span class="dt">filename =</span> <span class="st">&quot;graph/APS_plot_2.tiff&quot;</span>,</a>
<a class="sourceLine" id="cb73-21" data-line-number="21">         <span class="dt">width =</span><span class="dv">85</span>, <span class="dt">height =</span> <span class="dv">140</span>, <span class="dt">units =</span> <span class="st">&quot;mm&quot;</span>,</a>
<a class="sourceLine" id="cb73-22" data-line-number="22">         <span class="dt">dpi =</span> <span class="dv">300</span>)</a>
<a class="sourceLine" id="cb73-23" data-line-number="23">   p3</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-40-1.png" width="576" /></p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">  p4 =<span class="st"> </span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="st">    </span><span class="kw">ggplot</span>(survey_data_long, <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> rate))<span class="op">+</span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb74-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">color =</span> farm_management),</a>
<a class="sourceLine" id="cb74-5" data-line-number="5">                <span class="dt">size =</span> <span class="fl">1.5</span>, <span class="dt">width =</span> <span class="fl">0.3</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb74-6" data-line-number="6"><span class="st">    </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>,<span class="dv">100</span>,<span class="dv">25</span>),</a>
<a class="sourceLine" id="cb74-7" data-line-number="7">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))<span class="op">+</span></a>
<a class="sourceLine" id="cb74-8" data-line-number="8"><span class="st">    </span><span class="kw">scale_color_npg</span>()<span class="op">+</span></a>
<a class="sourceLine" id="cb74-9" data-line-number="9"><span class="st">    </span><span class="kw">facet_wrap</span>(<span class="op">~</span>metric, <span class="dt">ncol =</span> <span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb74-10" data-line-number="10"><span class="st">    </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>, <span class="dt">y =</span> <span class="st">&quot;Percent (%)&quot;</span>)<span class="op">+</span><span class="st">  </span></a>
<a class="sourceLine" id="cb74-11" data-line-number="11"><span class="st">    </span><span class="kw">theme</span>(</a>
<a class="sourceLine" id="cb74-12" data-line-number="12">      <span class="dt">panel.background =</span> <span class="kw">element_blank</span>() ,</a>
<a class="sourceLine" id="cb74-13" data-line-number="13">      <span class="dt">panel.grid.major =</span> <span class="kw">element_line</span>(<span class="dt">colour =</span> <span class="st">&quot;grey88&quot;</span>) ,</a>
<a class="sourceLine" id="cb74-14" data-line-number="14">      <span class="dt">panel.border     =</span> <span class="kw">element_rect</span>(<span class="dt">colour =</span> <span class="st">&quot;grey80&quot;</span>, <span class="dt">fill =</span> <span class="ot">NA</span>),</a>
<a class="sourceLine" id="cb74-15" data-line-number="15">      <span class="dt">axis.text  =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>),</a>
<a class="sourceLine" id="cb74-16" data-line-number="16">      <span class="dt">title =</span> <span class="kw">element_text</span>(<span class="dt">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb74-17" data-line-number="17">      <span class="dt">legend.position =</span> <span class="st">&quot;none&quot;</span>,</a>
<a class="sourceLine" id="cb74-18" data-line-number="18">      <span class="dt">strip.text.x =</span>  <span class="kw">element_text</span>(<span class="dt">hjust =</span><span class="fl">0.01</span>, <span class="dt">face =</span> <span class="st">&quot;bold&quot;</span>),</a>
<a class="sourceLine" id="cb74-19" data-line-number="19">      <span class="dt">strip.background =</span>  <span class="kw">element_blank</span>())</a>
<a class="sourceLine" id="cb74-20" data-line-number="20"></a>
<a class="sourceLine" id="cb74-21" data-line-number="21"></a>
<a class="sourceLine" id="cb74-22" data-line-number="22">  <span class="kw">ggsave</span>(<span class="dt">plot =</span> p4, <span class="dt">filename =</span> <span class="st">&quot;graph/APS_plot_3.tiff&quot;</span>,</a>
<a class="sourceLine" id="cb74-23" data-line-number="23">         <span class="dt">width =</span><span class="dv">85</span>, <span class="dt">height =</span> <span class="dv">140</span>, <span class="dt">units =</span> <span class="st">&quot;mm&quot;</span>,</a>
<a class="sourceLine" id="cb74-24" data-line-number="24">         <span class="dt">dpi =</span> <span class="dv">300</span>)</a>
<a class="sourceLine" id="cb74-25" data-line-number="25">  p4</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-41-1.png" width="576" /> # Extra plots</p>
<p>Here we explore using geom_errorbar()</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1"> demo_data =<span class="st">  </span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="st">  </span>survey_data <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="st">    </span><span class="kw">group_by</span>(farm_management) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb75-4" data-line-number="4"><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">inc_m =</span> <span class="kw">mean</span>(inc), </a>
<a class="sourceLine" id="cb75-5" data-line-number="5">              <span class="dt">inc_sd =</span> <span class="kw">sd</span>(inc), </a>
<a class="sourceLine" id="cb75-6" data-line-number="6">              <span class="dt">lower =</span> inc_m<span class="op">-</span>inc_sd, </a>
<a class="sourceLine" id="cb75-7" data-line-number="7">              <span class="dt">upper =</span> inc_m<span class="op">+</span>inc_sd)</a>
<a class="sourceLine" id="cb75-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb75-9" data-line-number="9">  demo_data</a></code></pre></div>
<pre><code>## # A tibble: 4 x 5
##   farm_management inc_m inc_sd lower upper
## * &lt;fct&gt;           &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Unmanaged        55.4  12.9   42.6  68.3
## 2 Minimal          38.0  11.1   26.9  49.2
## 3 Moderate         37.8   8.31  29.5  46.1
## 4 Intensive        19.7   7.56  12.1  27.2</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">  <span class="kw">ggplot</span>(demo_data, <span class="kw">aes</span>(<span class="dt">x =</span> farm_management, <span class="dt">y =</span> inc_m))<span class="op">+</span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_errorbar</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> inc_m<span class="op">+</span>inc_sd), <span class="dt">width=</span>.<span class="dv">1</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb77-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-42-1.png" width="672" /></p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">  <span class="kw">ggplot</span>(demo_data, <span class="kw">aes</span>(<span class="dt">x =</span> farm_management, <span class="dt">y =</span> inc_m))<span class="op">+</span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="st">    </span><span class="kw">geom_linerange</span>(<span class="kw">aes</span>(<span class="dt">ymin =</span> lower, <span class="dt">ymax =</span> inc_m<span class="op">+</span>inc_sd),</a>
<a class="sourceLine" id="cb78-3" data-line-number="3">                   <span class="dt">color =</span> <span class="st">&quot;grey&quot;</span>, <span class="dt">size =</span> <span class="dv">2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb78-4" data-line-number="4"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb78-5" data-line-number="5"><span class="st">    </span></a>
<a class="sourceLine" id="cb78-6" data-line-number="6"><span class="st">    </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-43-1.png" width="672" /></p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">  <span class="kw">ggplot</span>(<span class="dt">data =</span> demo_data, <span class="kw">aes</span>(<span class="dt">x =</span> farm_management, <span class="dt">y =</span> inc_m))<span class="op">+</span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="st">    </span></a>
<a class="sourceLine" id="cb79-3" data-line-number="3"><span class="st">    </span><span class="kw">geom_jitter</span>(<span class="dt">data =</span> survey_data, <span class="kw">aes</span>(<span class="dt">x =</span> farm_management, <span class="dt">y =</span> inc),</a>
<a class="sourceLine" id="cb79-4" data-line-number="4">                <span class="dt">width =</span> <span class="fl">0.3</span>, <span class="dt">alpha =</span> <span class="fl">0.2</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb79-5" data-line-number="5"><span class="st">    </span></a>
<a class="sourceLine" id="cb79-6" data-line-number="6"><span class="st">    </span><span class="kw">geom_linerange</span>( <span class="kw">aes</span>(<span class="dt">ymin =</span> inc_m<span class="op">-</span>inc_sd, <span class="dt">ymax =</span> inc_m<span class="op">+</span>inc_sd), </a>
<a class="sourceLine" id="cb79-7" data-line-number="7">                    <span class="dt">color =</span> <span class="st">&quot;black&quot;</span>, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">alpha =</span> <span class="fl">0.6</span>)<span class="op">+</span></a>
<a class="sourceLine" id="cb79-8" data-line-number="8"><span class="st">    </span></a>
<a class="sourceLine" id="cb79-9" data-line-number="9"><span class="st">    </span><span class="kw">geom_point</span>(<span class="dt">size=</span><span class="dv">4</span>, <span class="dt">shape =</span> <span class="dv">18</span>, <span class="dt">color =</span> <span class="st">&quot;red&quot;</span>) <span class="op">+</span><span class="st"> </span><span class="kw">coord_flip</span>()</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-43-2.png" width="672" /></p>
</div>
<div id="combining-multiple-plots" class="section level1">
<h1>Combining multiple plots</h1>
<p>There are several packages that can be used to combine multiple plots, one that we like is “ggpubr”.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">p5 =<span class="st"> </span><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> inc))<span class="op">+</span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> farm_management), </a>
<a class="sourceLine" id="cb80-4" data-line-number="4">              <span class="dt">width =</span> <span class="fl">0.2</span>,<span class="dt">size =</span> <span class="dv">3</span>)<span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Incidence (%)&quot;</span>,</a>
<a class="sourceLine" id="cb80-6" data-line-number="6">                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>),</a>
<a class="sourceLine" id="cb80-7" data-line-number="7">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-8" data-line-number="8"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color=</span><span class="st">&#39;Farm Management&#39;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-9" data-line-number="9"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-10" data-line-number="10"><span class="st">  </span><span class="kw">theme_minimal</span>()</a>
<a class="sourceLine" id="cb80-11" data-line-number="11"></a>
<a class="sourceLine" id="cb80-12" data-line-number="12">p5</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-44-1.png" width="672" /></p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1">p6 =<span class="st"> </span><span class="kw">ggplot</span>(survey_data,  <span class="kw">aes</span>(<span class="dt">x=</span> farm_management, <span class="dt">y =</span> sev2))<span class="op">+</span></a>
<a class="sourceLine" id="cb81-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_boxplot</span>(<span class="dt">outlier.alpha =</span> <span class="dv">0</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="kw">aes</span>(<span class="dt">colour =</span> farm_management), </a>
<a class="sourceLine" id="cb81-4" data-line-number="4">              <span class="dt">width =</span> <span class="fl">0.2</span>,<span class="dt">size =</span> <span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-5" data-line-number="5"><span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">name =</span> <span class="st">&quot;Incidence (%)&quot;</span>,</a>
<a class="sourceLine" id="cb81-6" data-line-number="6">                       <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">25</span>,<span class="dv">50</span>, <span class="dv">75</span>, <span class="dv">100</span>),</a>
<a class="sourceLine" id="cb81-7" data-line-number="7">                       <span class="dt">limits =</span> <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">100</span>)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb81-8" data-line-number="8"><span class="st">  </span><span class="kw">labs</span>(<span class="dt">color=</span><span class="st">&#39;Farm Management&#39;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb81-9" data-line-number="9"><span class="st">  </span><span class="kw">xlab</span>(<span class="st">&quot;Farm Management&quot;</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb81-10" data-line-number="10"><span class="st">   </span><span class="kw">theme_minimal</span>()</a>
<a class="sourceLine" id="cb81-11" data-line-number="11"></a>
<a class="sourceLine" id="cb81-12" data-line-number="12">p6</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-44-2.png" width="672" /></p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1"><span class="kw">ggarrange</span>(p5, p6, <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">nrow =</span> <span class="dv">2</span>, <span class="dt">common.legend =</span> T, <span class="dt">legend =</span> <span class="st">&quot;right&quot;</span>, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>))</a></code></pre></div>
<p><img src="ggplot2_files/figure-html/unnamed-chunk-45-1.png" width="768" /></p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
