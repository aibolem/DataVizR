<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Introduction to R</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { font-weight: bold; } /* Alert */
code span.an { font-style: italic; } /* Annotation */
code span.cf { font-weight: bold; } /* ControlFlow */
code span.co { font-style: italic; } /* Comment */
code span.cv { font-style: italic; } /* CommentVar */
code span.do { font-style: italic; } /* Documentation */
code span.dt { text-decoration: underline; } /* DataType */
code span.er { font-weight: bold; } /* Error */
code span.in { font-style: italic; } /* Information */
code span.kw { font-weight: bold; } /* Keyword */
code span.pp { font-weight: bold; } /* Preprocessor */
code span.wa { font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>


<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 66px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h2 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h3 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h4 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h5 {
  padding-top: 71px;
  margin-top: -71px;
}
.section h6 {
  padding-top: 71px;
  margin-top: -71px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Visualization in R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Welcome</a>
</li>
<li>
  <a href="pre_work.html">Workshop Pre-Work</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Introduction to R
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="intro/presentation.html">Slides</a>
    </li>
    <li>
      <a href="Intro_R.html">Code</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Intro to ggplot2
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="data_viz_Felipe.html">Slides</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Network graphs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="Code">Slides</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Maps
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mapping/slideshow/mapping_presentation.html">Slides</a>
    </li>
    <li>
      <a href="mapping.html">Code</a>
    </li>
  </ul>
</li>
<li>
  <a href="resources.html">Resources</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Introduction to R</h1>

</div>


<p>Here we will go through some R basics, with an emphasis on skills that you will use later on in the workshop. Of course, we do not have time to cover everything here, so we encourage you to check out our “resources” section for more introductory R material.<br />
<br />
Additionally, everything in R can be done in a number of ways - we are showing only one way here.</p>
<div id="why-use-r" class="section level1">
<h1>Why use R?</h1>
<p>We recognize that there are many options when it comes to statistical and vizualization software. Here are a few reasons that we have chosen R for most applications.</p>
<ul>
<li><p><strong>Performance</strong>: stable, light and fast</p></li>
<li><p><strong>Support network</strong>: documentation, community, developers</p></li>
<li><p><strong>Reproducibility</strong>: anyone anywhere can reproduce results</p></li>
<li><p><strong>Versatility</strong>: unified solution to <em>almost</em> any numerical problem and graphical capabilities</p></li>
<li><p><strong>Ethics</strong>: open source, removes economic barrier to data analysis</p></li>
</ul>
</div>
<div id="r-vs.rstudio" class="section level1">
<h1>R vs. RStudio</h1>
<p>R itself can be downloaded here: <a href="http://www.r-project.org/" class="uri">http://www.r-project.org/</a></p>
<p>The R console is basic…</p>
<p><img src="intro/img/R.PNG" width="351" /></p>
<div id="rstudio-ide" class="section level2">
<h2>RStudio (IDE) <img src="https://dfsuknfbz46oq.cloudfront.net/p/icons/rstudio.png" width="35" align="center"/></h2>
<ul>
<li>Integrated Development Environment (IDE) for R</li>
<li>Separate program, developed by a company but also free and open source.</li>
<li>By far the best thing to use when learning R.</li>
<li>R studio “talks” to R. You can use R without RStudio installed on your computer but you can’t use RStudio without R.</li>
</ul>
</div>
<div id="orientation-to-rstudio" class="section level2">
<h2>Orientation to RStudio</h2>
<div id="layout-of-rstudio" class="section level3">
<h3>Layout of RStudio</h3>
<p>Four panes (positions pf panes can be changed, we will talk through the default)</p>
<ul>
<li>Scripts (top-left)</li>
<li>R console (bottom-left)</li>
<li>Environment/history (top-right)</li>
<li>Files/plots/help/etc (bottom-right)</li>
</ul>
<p><img src="intro/img/RStudio-console.png" width="862" /></p>
</div>
<div id="rstudio-projects" class="section level3">
<h3>RStudio Projects</h3>
<ul>
<li>Projects in RStudio create a folder for storing all of our files (data, scripts, images)<br />
</li>
<li>Projects eliminate the need for setting our working directory with setwd()<br />
</li>
<li>It is useful to create individual folders within the project for storing data, scripts, images, etc.<br />
</li>
<li>When you want to open your project on a new computer, just copy the entire folder onto the new machine</li>
</ul>
</div>
<div id="getting-extra-help" class="section level3">
<h3>Getting extra help</h3>
<p>We all run into isssues and error codes when working in R. Google is your friend! Here are some helpful resources for when you get stuck:</p>
<ul>
<li><strong>Google</strong>: just add “with R” at the end of any search or search for an entire error message<br />
</li>
<li><strong>Stack Overflow</strong>: programming questions<br />
</li>
<li><strong>Cross Validated</strong>: scientific questions</li>
</ul>
<p>Additional references (more in the ‘references’ tab of our workshop website):<br />
- “R for Data Science” → <a href="https://r4ds.had.co.nz" class="uri">https://r4ds.had.co.nz</a><br />
- R4DS Learning Community → <a href="https://rfordatasci.com" class="uri">https://rfordatasci.com</a></p>
<p>Now that we’ve been introduced to R, let’s get to work.</p>
</div>
</div>
</div>
<div id="basic-r-concepts" class="section level1">
<h1>Basic R Concepts</h1>
<ul>
<li>In R, we have <strong>objects</strong>, where the data is stored and <strong>Functions</strong> which are applied on objects or another functions (i.e. to analyze the data).<br />
</li>
<li>When we work, we create <strong>scripts</strong> which are something like kitchen recipes.</li>
<li>Our collection of scripts is stored in an <strong>R project</strong>.</li>
</ul>
<div id="objects" class="section level2">
<h2>Objects</h2>
<p>We can assign values to objects using the assignment operator (AKA &quot;gets arrow:), and use R to do useful things. You may come across code that assigns values using = instead of <code>&lt;-</code>, which can have some slight differences. It is good practice to stick with <code>&lt;-</code> for assigning values.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="dv">1</span><span class="op">+</span><span class="dv">3</span> <span class="co"># R is a fancy calculator</span></a></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span> <span class="co"># assign 1 to object x</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="dv">2</span> <span class="co"># assign 2 to object y</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">x <span class="op">+</span><span class="st"> </span>y <span class="co"># add 1 and 2 together </span></a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">x <span class="op">+</span><span class="st"> </span><span class="dv">10</span> <span class="co"># you can add a number to an object</span></a></code></pre></div>
<pre><code>## [1] 11</code></pre>
<p>But be careful…</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">x <span class="op">+</span><span class="st"> </span>Y <span class="co"># R is case sensitive (this will not work)</span></a></code></pre></div>
<p><em>pro tip: stick to lower case letters and underscores &amp; avoid numbers when naming objects.</em></p>
<div id="object-types" class="section level3">
<h3>Object types</h3>
<p>As we mentioned earlier, we can store many things in</p>
<div id="vectors" class="section level4">
<h4>Vectors</h4>
<p>We can save multiple values into a single object, called a <strong>vector</strong>, using the <code>c()</code> function:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">num &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">50</span>, <span class="dv">60</span>, <span class="dv">65</span>) </a>
<a class="sourceLine" id="cb8-2" data-line-number="2">num</a></code></pre></div>
<pre><code>## [1] 50 60 65</code></pre>
<p>Vectors can contain other types of data:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">char &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;mouse&quot;</span>, <span class="st">&quot;rat&quot;</span>, <span class="st">&quot;dog&quot;</span>) </a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3">fct &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;med&quot;</span>, <span class="st">&quot;high&quot;</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"></a>
<a class="sourceLine" id="cb10-5" data-line-number="5">dates &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">c</span>(<span class="st">&quot;02/27/92&quot;</span>, <span class="st">&quot;02/27/92&quot;</span>, <span class="st">&quot;01/14/92&quot;</span>), <span class="st">&quot;%m/%d/%y&quot;</span>)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">logical &lt;-<span class="st">  </span><span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>) <span class="co"># only TRUE or FALSE</span></a></code></pre></div>
<p>Note the quotation marks!</p>
</div>
<div id="data-frames" class="section level4">
<h4>Data frames</h4>
<p>A <strong>data frame</strong> is the most common way of storing data in R and, generally, is the data structure most often used for data analyses. Under the hood, a <strong>data frame</strong> is a list of equal-length vectors. Each element of the list can be thought of as a column and the length of each element of the list is the number of rows.</p>
<p>Here we can make our own data frame:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  <span class="dt">col_one =</span> num,</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">  <span class="dt">col_two =</span> char,</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">  <span class="dt">col_three =</span> dates</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="kw">print</span>(df)</a></code></pre></div>
<pre><code>##   col_one col_two  col_three
## 1      50   mouse 1992-02-27
## 2      60     rat 1992-02-27
## 3      65     dog 1992-01-14</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">head</span>(df,<span class="dv">1</span>)</a></code></pre></div>
<pre><code>##   col_one col_two  col_three
## 1      50   mouse 1992-02-27</code></pre>
<p>Notice that there are different data types in table header. Datatypes in R: int stands for integers.</p>
<p><code>dbl</code> stands for doubles, or real numbers.</p>
<p><code>chr</code> stands for character vectors, or strings.</p>
<p><code>dttm</code> stands for date-times (a date + a time).</p>
<p><code>lgl</code> stands for logical, vectors that contain only TRUE or FALSE.</p>
<p><code>fctr</code> stands for factors, which R uses to represent categorical variables with fixed possible values.</p>
</div>
</div>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<p>Functions are “canned scripts” which automate a series of commands on one or more inputs called arguments.</p>
<p>Here is a very simple example of a function that we made:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">addition &lt;-<span class="st"> </span><span class="cf">function</span>(argument_one, argument_two){ </a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  argument_one <span class="op">+</span><span class="st"> </span>argument_two </a>
<a class="sourceLine" id="cb15-3" data-line-number="3">} </a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">addition</span>(<span class="dt">argument_one =</span> x,</a>
<a class="sourceLine" id="cb15-5" data-line-number="5">         <span class="dt">argument_two =</span> y)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="co"># Notice the difference?!</span></a>
<a class="sourceLine" id="cb17-2" data-line-number="2"><span class="kw">addition</span>(x, y)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="kw">addition</span>(x, y) <span class="op">==</span><span class="st"> </span>x<span class="op">+</span>y <span class="co">#notice double &quot;=&quot;</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" data-line-number="1"><span class="kw">all.equal</span>(<span class="kw">addition</span>(x, y), x<span class="op">+</span>y) <span class="co">#Same as above, but pre-made</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Many functions, however, are already in “base” R, or can be downloaded in sets of functions known as <strong>packages</strong>. You can download packages made by others, or even create your own. We will not cover creating packages in this workshop.</p>
<p>Some useful functions that are built into base R:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" data-line-number="1"><span class="kw">round</span>(<span class="fl">3.14159</span>)</a></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="kw">round</span>(<span class="fl">3.14159</span>, <span class="dt">digits =</span> <span class="dv">2</span>)</a></code></pre></div>
<pre><code>## [1] 3.14</code></pre>
<p>Arguments can be anything (numbers, file names, variables), options are arguments that take on default values which can be altered by the user. It is also possible (and very useful) to create your own functions, particularly if you find yourself using the same code chunks over and over on different data.</p>
<p>Some other useful functions:</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" data-line-number="1"><span class="kw">length</span>(x) <span class="co"># Counts the number of elements in the vector</span></a></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">class</span>(x) <span class="co"># Identifies the type of elements</span></a></code></pre></div>
<pre><code>## [1] &quot;numeric&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1"><span class="kw">str</span>(x) <span class="co"># Display structure of object</span></a></code></pre></div>
<pre><code>##  num 1</code></pre>
</div>
<div id="packages" class="section level2">
<h2>Packages</h2>
<p>Packages can be seen as a collection of functions:</p>
</div>
</div>
<div id="logical-operators-subsetting" class="section level1">
<h1>Logical operators &amp; subsetting</h1>
<div id="logical-operators" class="section level2">
<h2>Logical operators</h2>
<p>Here are some examples of how logical operators work in R:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1">y <span class="op">==</span><span class="st"> </span>y <span class="co"># equal to</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1"><span class="dv">1</span> <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="co"># greater than</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1"><span class="dv">3</span> <span class="op">&gt;=</span><span class="st"> </span><span class="dv">4</span> <span class="co"># greater than or equal to</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">y <span class="op">!=</span><span class="st"> </span>x <span class="co"># not equal to </span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" data-line-number="1">y <span class="op">|</span><span class="st"> </span>x <span class="co"># or</span></a></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>We can subset on multiple conditions using &amp; for AND conditions (ie. both are TRUE), and | for OR conditions (ie. either are TRUE):</p>
</div>
<div id="subsetting" class="section level2">
<h2>Subsetting</h2>
<p>Operators can help us subset data.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb43-1" data-line-number="1">char[char <span class="op">==</span><span class="st"> &quot;mouse&quot;</span><span class="op">|</span>char <span class="op">==</span><span class="st"> &quot;rat&quot;</span>]</a></code></pre></div>
<pre><code>## [1] &quot;mouse&quot; &quot;rat&quot;</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb45-1" data-line-number="1">num[num <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span> <span class="op">&amp;</span><span class="st"> </span>num <span class="op">==</span><span class="st"> </span><span class="dv">21</span>]</a></code></pre></div>
<pre><code>## numeric(0)</code></pre>
<p><em>Notice that we use == when subsetting instead of =.</em></p>
<div id="indexing-and-subsetting-dataframes" class="section level3">
<h3>Indexing and subsetting dataframes</h3>
<p>Dataframes are also subsetted or indexed with square brackets. We must specify rows then columns[row,column]:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb47-1" data-line-number="1">df[<span class="dv">1</span>, <span class="dv">1</span>] <span class="co"># first element in the first column of the data frame (as a vector)</span></a>
<a class="sourceLine" id="cb47-2" data-line-number="2">df[<span class="dv">1</span>, <span class="dv">3</span>] <span class="co"># first element in the third column (as a vector)</span></a>
<a class="sourceLine" id="cb47-3" data-line-number="3">df[, <span class="dv">1</span>] <span class="co"># first column in the data frame (as a vector)</span></a>
<a class="sourceLine" id="cb47-4" data-line-number="4">df[<span class="dv">1</span>] <span class="co"># first column in the data frame (as a data.frame)</span></a>
<a class="sourceLine" id="cb47-5" data-line-number="5">df[<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>, <span class="dv">3</span>] <span class="co"># first two elements in the third column (as a vector)</span></a>
<a class="sourceLine" id="cb47-6" data-line-number="6">df[<span class="dv">3</span>, ] <span class="co"># the 3rd element for all columns (as a data.frame)</span></a></code></pre></div>
<p>Use the - sign to exclude certain sections:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">df[,<span class="op">-</span><span class="dv">1</span>] <span class="co"># The whole data frame, except the first column</span></a></code></pre></div>
<pre><code>##   col_two  col_three
## 1   mouse 1992-02-27
## 2     rat 1992-02-27
## 3     dog 1992-01-14</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">df[<span class="op">-</span><span class="kw">c</span>(<span class="dv">2</span><span class="op">:</span><span class="dv">3</span>),] <span class="co"># remove a sequence of rows</span></a></code></pre></div>
<pre><code>##   col_one col_two  col_three
## 1      50   mouse 1992-02-27</code></pre>
<p>Columns can be selected by name using the these operators:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">df[<span class="st">&quot;col_one&quot;</span>] <span class="co"># Result is a data.frame</span></a></code></pre></div>
<pre><code>##   col_one
## 1      50
## 2      60
## 3      65</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">df[, <span class="st">&quot;col_one&quot;</span>] <span class="co"># Result is a vector</span></a></code></pre></div>
<pre><code>## [1] 50 60 65</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">df[[<span class="st">&quot;col_one&quot;</span>]] <span class="co"># Result is a vector</span></a></code></pre></div>
<pre><code>## [1] 50 60 65</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">df<span class="op">$</span>col_one <span class="co"># Result is a vector</span></a></code></pre></div>
<pre><code>## [1] 50 60 65</code></pre>
</div>
</div>
</div>
<div id="tidyverse" class="section level1">
<h1>Tidyverse</h1>
<p><code>tidyverse</code> is a “package of packages” which includes several packages:</p>
<p><img src="intro/img/tidyverse.png" width="512" /></p>
<p>…designed to make the data analysis easier.</p>
<p><img src="intro/img/tidyverse-process.png" width="954" /></p>
<p>Hence loading <code>tidyverse</code></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Replaces loading all these packages:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb61-1" data-line-number="1"><span class="kw">library</span>(ggplot2) </a>
<a class="sourceLine" id="cb61-2" data-line-number="2"><span class="kw">library</span>(tibble) </a>
<a class="sourceLine" id="cb61-3" data-line-number="3"><span class="kw">library</span>(tidyr) </a>
<a class="sourceLine" id="cb61-4" data-line-number="4"><span class="kw">library</span>(readr) </a>
<a class="sourceLine" id="cb61-5" data-line-number="5"><span class="kw">library</span>(purrr) </a>
<a class="sourceLine" id="cb61-6" data-line-number="6"><span class="kw">library</span>(dplyr) </a>
<a class="sourceLine" id="cb61-7" data-line-number="7"><span class="kw">library</span>(stringr) </a>
<a class="sourceLine" id="cb61-8" data-line-number="8"><span class="kw">library</span>(forcats) </a></code></pre></div>
<div id="data-import" class="section level2">
<h2>Data import</h2>
<p>Number of functions within <code>readr</code> and <code>readxl</code> for different types of files.</p>
<p>For this workshop, we will use <a href="https://osf.io/xejaz/">coffee leaf rust data from Ethiopia</a> provided by Emerson M. Del Ponte and Kifle Belachew.</p>
<p><em>Note from Kelsey: here we need to say that they will ned to have this data downloaded into their R project/working dir. </em></p>
<p><em>If we use “here” we need to explain what it is and what it does. </em></p>
<pre><code>## # A tibble: 6 x 13
##    farm region zone  district   lon   lat altitude cultivar shade
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;
## 1     1 SNNPR  Benc… Debub B…  35.4  6.90     1100 Local    Sun  
## 2     2 SNNPR  Benc… Debub B…  35.4  6.90     1342 Mixture  Mid …
## 3     3 SNNPR  Benc… Debub B…  35.4  6.90     1434 Mixture  Mid …
## 4     4 SNNPR  Benc… Debub B…  35.4  6.90     1100 Local    Sun  
## 5     5 SNNPR  Benc… Debub B…  35.4  6.90     1400 Local    Sun  
## 6     6 SNNPR  Benc… Debub B…  35.4  6.90     1342 Mixture  Mid …
## # … with 4 more variables: cropping_system &lt;chr&gt;, farm_management &lt;chr&gt;,
## #   inc &lt;dbl&gt;, sev2 &lt;dbl&gt;</code></pre>
</div>
<div id="data-transformation" class="section level2">
<h2>Data transformation</h2>
<p>All that bracket-based selecting can be a bit cumbersome. Add-on package <code>dplyr</code> greatly simplifies the process; inspired by SQL.</p>
<div id="key-functions" class="section level3">
<h3>Key functions</h3>
<p>There is six key <code>dplyr</code> functions that allow you to solve the vast majority of your data transformation challenges:</p>
<table>
<thead>
<tr class="header">
<th align="center">Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>filter</code></td>
<td>pick observations based on values</td>
</tr>
<tr class="even">
<td align="center"><code>select</code></td>
<td>pick variables</td>
</tr>
<tr class="odd">
<td align="center"><code>summarize</code></td>
<td>compute statistical summaries</td>
</tr>
<tr class="even">
<td align="center"><code>group_by</code></td>
<td>perform operations at different levels of your data</td>
</tr>
<tr class="odd">
<td align="center"><code>arrange</code></td>
<td>reorder data</td>
</tr>
<tr class="even">
<td align="center"><code>mutate</code></td>
<td>create new variables</td>
</tr>
</tbody>
</table>
</div>
<div id="pipes" class="section level3">
<h3>Pipes</h3>
<p>From <code>magrittr</code> package.<br />
Traditional approach:<br />
<code>function(**data**, argument_one, argument_two,...)</code><br />
pipe(%&gt;%) approach: <code>data %&gt;% function( ., argument_one, argument_two,...)</code></p>
<p>**Note from Kelsey: consider removing this “common operators section”*</p>
</div>
<div id="common-operators" class="section level3">
<h3>Common operators</h3>
<table>
<thead>
<tr class="header">
<th align="center">Operator</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>+,-,*,/,^</code></td>
<td>arithmetic</td>
</tr>
<tr class="even">
<td align="center"><code>x / sum(x)</code></td>
<td>arithmetic w/aggregation</td>
</tr>
<tr class="odd">
<td align="center"><code>%/%, %%</code></td>
<td>modular arithmetic</td>
</tr>
<tr class="even">
<td align="center"><code>log, exp, sqrt</code></td>
<td>transformations</td>
</tr>
<tr class="odd">
<td align="center"><code>lag, lead</code></td>
<td>offsets</td>
</tr>
<tr class="even">
<td align="center"><code>cumsum, cumprod, cum...</code></td>
<td>cum/rolling aggregates</td>
</tr>
<tr class="odd">
<td align="center"><code>&gt;, &gt;=, &lt;, &lt;=, !=, ==</code></td>
<td>logical comparisons</td>
</tr>
<tr class="even">
<td align="center"><code>min_rank, dense_rank</code></td>
<td>ranking</td>
</tr>
<tr class="odd">
<td align="center"><code>between</code></td>
<td>are values between a and b?</td>
</tr>
<tr class="even">
<td align="center"><code>ntile</code></td>
<td>bin values into n buckets</td>
</tr>
</tbody>
</table>
</div>
<div id="put-this-to-practice" class="section level3">
<h3>Put this to practice</h3>
<p><em>tidyverse</em> makes code readibility much easier, and you an write long sequences in a much freindlier manner than what we have seen above. We will take a smaller subset of our data to illustrate these concepts. As this is slightly more complicated example, we suggest comming back to this later to see if you can understand what was done.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb63-1" data-line-number="1">dt_small &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb63-2" data-line-number="2">dt <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-3" data-line-number="3"><span class="st">  </span><span class="kw">select</span>(cultivar, zone, inc) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb63-4" data-line-number="4"><span class="st">  </span><span class="kw">group_by</span>(cultivar, zone) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb63-5" data-line-number="5"><span class="st">  </span><span class="kw">slice</span>(<span class="kw">head</span>(<span class="kw">row_number</span>(), <span class="dv">1</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb63-6" data-line-number="6"><span class="st">  </span><span class="kw">filter</span>(zone <span class="op">==</span><span class="st">&quot;Sheka&quot;</span> <span class="op">|</span>zone <span class="op">==</span><span class="st">  &quot;Sidama&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb63-7" data-line-number="7"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb63-8" data-line-number="8">dt_small</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   cultivar zone     inc
##   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;
## 1 Improved Sheka   33.2
## 2 Improved Sidama  16.5
## 3 Local    Sheka   81.8
## 4 Local    Sidama  35.2
## 5 Mixture  Sheka   29.5
## 6 Mixture  Sidama  18.6</code></pre>
<p>Try some of functions.<br />
<code>select()</code> to grab columns.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" data-line-number="1">dt_small_a &lt;-<span class="st"> </span>dt_small <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb65-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(cultivar, zone)</a>
<a class="sourceLine" id="cb65-3" data-line-number="3">dt_small_a</a></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   cultivar zone  
##   &lt;chr&gt;    &lt;chr&gt; 
## 1 Improved Sheka 
## 2 Improved Sidama
## 3 Local    Sheka 
## 4 Local    Sidama
## 5 Mixture  Sheka 
## 6 Mixture  Sidama</code></pre>
<p><code>filter()</code> to grab rows.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb67-1" data-line-number="1">dt_small <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb67-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(cultivar<span class="op">==</span><span class="st"> &quot;Local&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   cultivar zone     inc
##   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;
## 1 Local    Sheka   81.8
## 2 Local    Sidama  35.2</code></pre>
<p><code>mutate()</code> to make a new column.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" data-line-number="1">dt_small <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb69-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">double_inc =</span> inc <span class="op">*</span><span class="st"> </span><span class="dv">2</span>)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   cultivar zone     inc double_inc
##   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;
## 1 Improved Sheka   33.2       66.4
## 2 Improved Sidama  16.5       33  
## 3 Local    Sheka   81.8      164. 
## 4 Local    Sidama  35.2       70.4
## 5 Mixture  Sheka   29.5       59.1
## 6 Mixture  Sidama  18.6       37.2</code></pre>
<p>Count number of observations by variable <code>cultivar</code>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb71-1" data-line-number="1">dt_small <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(zone) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb71-3" data-line-number="3"><span class="st">  </span><span class="kw">tally</span>()</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   zone       n
## * &lt;chr&gt;  &lt;int&gt;
## 1 Sheka      3
## 2 Sidama     3</code></pre>
<p>Average inc by cultivar and remove missing values if there are any:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" data-line-number="1">dt_small <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cultivar) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb73-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_inc =</span> <span class="kw">mean</span>(inc, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   cultivar mean_inc
## * &lt;chr&gt;       &lt;dbl&gt;
## 1 Improved     24.8
## 2 Local        58.5
## 3 Mixture      24.1</code></pre>
<p>Also note that you can include multiple summaries and arrange order of rows based on some variable.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" data-line-number="1">dt_small <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cultivar) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-3" data-line-number="3"><span class="st">  </span><span class="kw">summarize</span>(<span class="dt">mean_inc =</span> <span class="kw">mean</span>(inc),</a>
<a class="sourceLine" id="cb75-4" data-line-number="4">            <span class="dt">min_weight =</span> <span class="kw">min</span>(inc)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb75-5" data-line-number="5"><span class="st">    </span><span class="kw">arrange</span>(<span class="kw">desc</span>(mean_inc))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   cultivar mean_inc min_weight
##   &lt;chr&gt;       &lt;dbl&gt;      &lt;dbl&gt;
## 1 Local        58.5       35.2
## 2 Improved     24.8       16.5
## 3 Mixture      24.1       18.6</code></pre>
</div>
</div>
<div id="reshaping-the-data-with-tidyr" class="section level2">
<h2>Reshaping the data with <code>tidyr</code></h2>
<p>It is often necessary to change the structure of data for different types of analysis, and especially for visualization.<br />
Let us start with <code>pivot_wider()</code>, which makes dataframes wider by increasing the number of columns and decreasing the number of rows.<br />
Generates multiple columns from two columns:<br />
1. each unique value in the key column - <code>zone</code> becomes a column name<br />
2. each value in the value column <code>inc</code> becomes a cell in the new columns</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" data-line-number="1">(dt_small_wide &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb77-2" data-line-number="2">dt_small <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb77-3" data-line-number="3"><span class="st">  </span><span class="kw">pivot_wider</span>(<span class="dt">names_from =</span> <span class="st">&quot;zone&quot;</span>, </a>
<a class="sourceLine" id="cb77-4" data-line-number="4">              <span class="dt">values_from =</span> <span class="st">&quot;inc&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   cultivar Sheka Sidama
##   &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;
## 1 Improved  33.2   16.5
## 2 Local     81.8   35.2
## 3 Mixture   29.5   18.6</code></pre>
<p><code>pivot_longer()</code> makes dataframes longer by increasing the number of rows and decreasing the number of columns.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" data-line-number="1">dt_small_wide <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb79-2" data-line-number="2"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="dt">cols =</span> </a>
<a class="sourceLine" id="cb79-3" data-line-number="3">                 <span class="kw">c</span>(<span class="st">&quot;Sheka&quot;</span>, <span class="st">&quot;Sidama&quot;</span>), </a>
<a class="sourceLine" id="cb79-4" data-line-number="4">               <span class="dt">names_to =</span> <span class="st">&quot;zone&quot;</span>,</a>
<a class="sourceLine" id="cb79-5" data-line-number="5">               <span class="dt">values_to =</span> <span class="st">&quot;inc&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   cultivar zone     inc
##   &lt;chr&gt;    &lt;chr&gt;  &lt;dbl&gt;
## 1 Improved Sheka   33.2
## 2 Improved Sidama  16.5
## 3 Local    Sheka   81.8
## 4 Local    Sidama  35.2
## 5 Mixture  Sheka   29.5
## 6 Mixture  Sidama  18.6</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb81-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<pre><code>## R version 4.0.3 (2020-10-10)
## Platform: x86_64-apple-darwin17.0 (64-bit)
## Running under: macOS Catalina 10.15.2
## 
## Matrix products: default
## BLAS:   /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRblas.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/4.0/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] here_1.0.1      forcats_0.5.1   stringr_1.4.0   dplyr_1.0.3    
##  [5] purrr_0.3.4     readr_1.4.0     tidyr_1.1.2     tibble_3.0.6   
##  [9] ggplot2_3.3.3   tidyverse_1.3.0
## 
## loaded via a namespace (and not attached):
##  [1] tidyselect_1.1.0  xfun_0.20         haven_2.3.1       colorspace_2.0-0 
##  [5] vctrs_0.3.6       generics_0.1.0    htmltools_0.5.1.1 yaml_2.2.1       
##  [9] utf8_1.1.4        rlang_0.4.10      pillar_1.4.7      glue_1.4.2       
## [13] withr_2.4.1       DBI_1.1.1         dbplyr_2.0.0      modelr_0.1.8     
## [17] readxl_1.3.1      lifecycle_0.2.0   munsell_0.5.0     gtable_0.3.0     
## [21] cellranger_1.1.0  rvest_0.3.6       evaluate_0.14     knitr_1.31       
## [25] fansi_0.4.2       highr_0.8         broom_0.7.4       Rcpp_1.0.6       
## [29] scales_1.1.1      backports_1.2.1   jsonlite_1.7.2    fs_1.5.0         
## [33] hms_1.0.0         png_0.1-7         digest_0.6.27     stringi_1.5.3    
## [37] grid_4.0.3        rprojroot_2.0.2   cli_2.3.0         tools_4.0.3      
## [41] magrittr_2.0.1    crayon_1.4.0      pkgconfig_2.0.3   ellipsis_0.3.1   
## [45] xml2_1.3.2        reprex_1.0.0      lubridate_1.7.9.2 assertthat_0.2.1 
## [49] rmarkdown_2.6     httr_1.4.2        rstudioapi_0.13   R6_2.5.0         
## [53] compiler_4.0.3</code></pre>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
