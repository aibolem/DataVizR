---
title: "Maps in R!"
---
**Workshop Organizers:** Kelsey Andersen Onofre, Rodrigo Onofre, Karen Garrett, Felipe Dalla Lana, Adam Sparks, Mladen Cucak

## Create a Map of Kansas and Add Sample Collection Points to the Map

### Setup

To do this you'll need a few packages from CRAN:

```{r pkg-load, eval=TRUE, messages=FALSE, warning=FALSE}
if (!require("pacman"))
  install.packages("pacman")
pacman::p_load(readr,
               ggplot2,
               rnaturalearth,
               rnaturalearthdata,
               sf,
               rgeos,
               lwgeom
)
```

And one from the rOpenSci Labs.

```{r github-install}
if (!require("rnaturalearthhires"))
  pacman::p_install_gh("ropenscilabs/rnaturalearthhires")
```

### Add a Simple Features Object of Kansas

This is our base layer, Australia, of the map from (Naturalearth.com)[https://naturalearth.com/].

```{r australia}
usa_sf <- rnaturalearth::ne_states(geounit = "United States of America",
                                   returnclass = "sf")
plot(usa_sf)
```

However, it includes several islands and ocean that are not of interest to us.
To fix this, crop it down to just the mainland plus Tasmania and remove Jervis Bay so that the labels on the final map product are cleaner.

```{r crop_sf}
usa_sf <- st_crop(x = usa_sf,
                 y = c(
                   xmin = 114,
                   xmax = 155,
                   ymin = -45,
                   ymax = -9
                 ))
usa_sf <- usa_sf[usa_sf$abbrev != "J.B.T.", ]
plot(usa_sf)
```

## Import Collection Point Data

If you have your own data in a .csv file, import it using `read_csv()`.
These are just random points that I generated and saved as a .csv file for this work to illustrate how to add points to a map.

```{r collection_data, eval=TRUE}
point_data <- read_csv("sample_points.csv",
                       col_types = cols(col_double(),
                                        col_double(),
                                        col_factor()))
```

## Plot Using ggplot2

Plot the final combination of data with the Naturalearthdata Australia data and state outlines with the sampling location points overplayed and colour-coded by the state where they were sampled.

```{r plot, eval=TRUE}
oz <- ggplot(usa_sf) +
  geom_sf(fill = "white") +
  geom_text(
    data = usa_sf,
    aes(x = longitude,
        y = latitude,
        label = abbrev),
    size = 2.5,
    hjust = 1
  ) +
  geom_point(data = point_data,
             aes(x = Longitude,
                 y = Latitude,
                 colour = class),
             size = 2) +
  theme_bw() +
  scale_colour_brewer(type = "Qualitative", palette = "Set1") +
  xlab("Longitude") +
  ylab("Latitude") +
  coord_sf()
oz
```

